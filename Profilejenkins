pipeline {
    agent {
        docker {
            image 'maven:3.8.1-adoptopenjdk-11'
        }
    }
    stages {
        stage('Build Web Application') {
            steps {
                sh 'mvn clean package' // Use 'clean package' to build a WAR
            }
        }
        stage('Extract and Run Java Code') {
            steps {
                sh 'mvn --version'
                
                // Extract the Java class from the WAR file
                sh 'mkdir extracted-class'
                sh 'unzip -q target/profile.war -d extracted-class'
                
                // Compile and run the extracted Java class
                sh 'javac -cp "extracted-class/WEB-INF/classes" extracted-class/path/to/DevOpsEngineerDetails.java'
                sh 'java -cp "extracted-class/WEB-INF/classes" path.to.DevOpsEngineerDetails'
            }
        }
    }
}
